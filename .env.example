# Business Source License 1.1
# 
# Licensed Work: keiko-dapp Version 0.0.1 or later.
# The Licensed Work is (c) 2025 Luis Andrés Peña Castillo
# 
# For full license terms, see LICENSE file in the repository root.

# Keiko Development Environment Variables
# Copia este archivo a .env y ajusta los valores según tu entorno

# =============================================================================
# ARQUITECTURA HÍBRIDA - CONFIGURACIÓN DE BASES DE DATOS POR MICROSERVICIO
# =============================================================================

# Identity Service Database
IDENTITY_DATABASE_URL=postgresql://keiko_identity:dev_password_identity@localhost:5432/identity_service
IDENTITY_DATABASE_MAX_CONNECTIONS=10

# Learning Service Database (Cache para interacciones xAPI)
LEARNING_DATABASE_URL=postgresql://keiko_learning:dev_password_learning@localhost:5433/learning_service
LEARNING_DATABASE_MAX_CONNECTIONS=20

# Reputation Service Database (Cálculos agregados de reputación)
REPUTATION_DATABASE_URL=postgresql://keiko_reputation:dev_password_reputation@localhost:5434/reputation_service
REPUTATION_DATABASE_MAX_CONNECTIONS=10

# Passport Service Database (Vistas agregadas de pasaportes)
PASSPORT_DATABASE_URL=postgresql://keiko_passport:dev_password_passport@localhost:5435/passport_service
PASSPORT_DATABASE_MAX_CONNECTIONS=15

# Governance Service Database (Propuestas y votaciones)
GOVERNANCE_DATABASE_URL=postgresql://keiko_governance:dev_password_governance@localhost:5436/governance_service
GOVERNANCE_DATABASE_MAX_CONNECTIONS=10

# Marketplace Service Database (Espacios, reservas, disponibilidad)
MARKETPLACE_DATABASE_URL=postgresql://keiko_marketplace:dev_password_marketplace@localhost:5437/marketplace_service
MARKETPLACE_DATABASE_MAX_CONNECTIONS=15

# =============================================================================
# REDIS - EVENTOS Y CACHE DISTRIBUIDO
# =============================================================================

REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=20

# =============================================================================
# SUBSTRATE PARACHAIN - FUENTE DE VERDAD
# =============================================================================

# Parachain RPC endpoints
SUBSTRATE_WS_URL=ws://localhost:9944
SUBSTRATE_HTTP_URL=http://localhost:9933

# Parachain account para transacciones de servicios
SUBSTRATE_SEED_PHRASE="//Alice"  # Solo para desarrollo
SUBSTRATE_ACCOUNT_TYPE="Sr25519"

# =============================================================================
# GRPC - COMUNICACIÓN ENTRE MICROSERVICIOS
# =============================================================================

# Identity Service gRPC
IDENTITY_GRPC_HOST=localhost
IDENTITY_GRPC_PORT=50051

# Learning Service gRPC
LEARNING_GRPC_HOST=localhost
LEARNING_GRPC_PORT=50052

# Reputation Service gRPC
REPUTATION_GRPC_HOST=localhost
REPUTATION_GRPC_PORT=50053

# Passport Service gRPC
PASSPORT_GRPC_HOST=localhost
PASSPORT_GRPC_PORT=50054

# Governance Service gRPC
GOVERNANCE_GRPC_HOST=localhost
GOVERNANCE_GRPC_PORT=50055

# Marketplace Service gRPC
MARKETPLACE_GRPC_HOST=localhost
MARKETPLACE_GRPC_PORT=50056

# AI Tutor Service gRPC
AI_TUTOR_GRPC_HOST=localhost
AI_TUTOR_GRPC_PORT=50057

# =============================================================================
# API GATEWAY - GRAPHQL + REST
# =============================================================================

API_GATEWAY_HOST=localhost
API_GATEWAY_PORT=8000
API_GATEWAY_GRAPHQL_PATH=/graphql
API_GATEWAY_PLAYGROUND_ENABLED=true

# CORS configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# =============================================================================
# AUTENTICACIÓN Y SEGURIDAD
# =============================================================================

JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRATION=24h
BCRYPT_ROUNDS=12

# =============================================================================
# AI TUTOR SERVICE
# =============================================================================

# OpenAI API (opcional)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4

# Anthropic API (opcional)
ANTHROPIC_API_KEY=your-anthropic-api-key
ANTHROPIC_MODEL=claude-3-sonnet

# =============================================================================
# LOGGING Y MONITOREO
# =============================================================================

LOG_LEVEL=info
LOG_FORMAT=json

# OpenTelemetry (opcional)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=keiko-services

# =============================================================================
# DESARROLLO Y TESTING
# =============================================================================

RUST_LOG=info,keiko=debug
RUST_BACKTRACE=1

# Test database URLs (usar bases de datos separadas para tests)
TEST_IDENTITY_DATABASE_URL=postgresql://keiko_identity:dev_password_identity@localhost:5432/identity_service_test
TEST_LEARNING_DATABASE_URL=postgresql://keiko_learning:dev_password_learning@localhost:5433/learning_service_test
TEST_REPUTATION_DATABASE_URL=postgresql://keiko_reputation:dev_password_reputation@localhost:5434/reputation_service_test
TEST_PASSPORT_DATABASE_URL=postgresql://keiko_passport:dev_password_passport@localhost:5435/passport_service_test
TEST_GOVERNANCE_DATABASE_URL=postgresql://keiko_governance:dev_password_governance@localhost:5436/governance_service_test
TEST_MARKETPLACE_DATABASE_URL=postgresql://keiko_marketplace:dev_password_marketplace@localhost:5437/marketplace_service_test

# =============================================================================
# FLUTTER FRONTEND
# =============================================================================

FLUTTER_GRAPHQL_ENDPOINT=http://localhost:8000/graphql
FLUTTER_WS_ENDPOINT=ws://localhost:8000/graphql